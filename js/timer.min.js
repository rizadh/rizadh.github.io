function setDial(e,i,t){var a=t>=.5?1:0,n=i*(1+Math.sin(2*Math.PI*t)),l=i*(1-Math.cos(2*Math.PI*t)),s=n+" "+l,o=i+" "+i,c=" 0 "+a+" 1 ",r="M"+i+" "+i,u="L"+i+" 0",d="A"+o+c+s,p=r+u+d;e.attr("d",p)}function setTime(e){console.log("starting time"),dial_time=1e3*e,$("#dial-ring").velocity({tween:WHOLE_CIRCLE},{duration:dial_time,easing:"linear",progress:function(e,i,t,a,n){setDial($("#dial-ring path"),50,n);var l=Math.ceil(t/1e3),s=Math.floor(l/60)%60,o=Math.floor(l/3600);l%=60,l=("0"+l).slice(-2),s=("0"+s).slice(-2),o=("0"+o).slice(-2),setDisplayTime([o,s,l].join(""))}})}function getDisplayTime(e){var i=$("#display-text");return e?i.text():i.data("current_time")}function setDisplayTime(e,i){var t=$("#display-text");if(i)t.text(e);else if(""==e)t.data("current_time","000000"),t.text("Enter a time");else{t.data("current_time",("000000"+e).slice(-6));for(var a=getDisplayTime(),n=[],l=["h","m","s"],s=0;3>s;s++){var o=a.slice(2*s,2*s+2);(o>0||n[s-1]||"s"==l[s])&&(10>o&&!n[0]&&(o=o.slice(-1)),n.push(o+l[s]))}var c=n.join(" ");c!=t.text()&&t.text(c)}}function startTimer(){$("#input-display").velocity({height:"90%"},{duration:400,easing:"easeOutExpo",begin:function(){$("#input-keypad td").velocity("fadeOut",200)},complete:function(){$("#edit-button").velocity("fadeIn",100),$("#dial-ring").velocity({opacity:[1,0],scale:[1,0]},{easing:"easeOutExpo",display:"block",duration:400,queue:!1})}});var e=getDisplayTime(),i=3600*e.slice(-6,-4),t=60*e.slice(-4,-2),a=1*e.slice(-2),n=i+t+a;setTime(n)}function editTime(){$("#input-display").velocity({height:"20%"},{duration:400,easing:"easeOutExpo",complete:function(){$("#input-keypad td").velocity("fadeIn",{duration:200,display:""})},begin:function(){$("#edit-button").velocity("fadeOut",100),$("#dial-ring").velocity("stop").velocity({opacity:0,scale:0},{easing:"easeOutExpo",display:"none",duration:400})}})}var WHOLE_CIRCLE=.99999;$(function(){setDisplayTime(""),$("#input-keypad td").click(function(){if(key_value=$(this).text(),"Clear"==key_value)setDisplayTime("");else if("Start"==key_value)startTimer();else{var e=(getDisplayTime()+key_value).slice(-6);setDisplayTime(e)}}),$("#edit-button").click(function(){editTime()})}),$(window).on("load resize orientationChange",function(){var e=Math.min(window.innerHeight,window.innerWidth);$("body").css("font-size",e/8)});