"use strict";function setDial(e,t,i){var a=i>=.5?1:0,s=t*(1+Math.sin(2*Math.PI*i)),o=t*(1-Math.cos(2*Math.PI*i)),l=s+" "+o,n=t+" "+t,r=" 0 "+a+" 1 ",d="M"+t+" "+t,c="L"+t+" 0",y="A"+n+r+l,p=d+c+y;e.attr("d",p)}function setTime(e){var t=1e3*e;$("#dial-ring path").velocity({tween:WHOLE_CIRCLE},{duration:t,easing:"linear",progress:function(e,t,i,a,s){setDial($("#dial-ring path"),50,s);var o=Math.ceil(i/1e3),l=Math.floor(o/60)%60,n=Math.floor(o/3600);o%=60,o=("0"+o).slice(-2),l=("0"+l).slice(-2),n=("0"+n).slice(-2),setDisplayTime([n,l,o].join(""),!1)}})}function getDisplayTime(e){var t=$("#display-text");return e?t.text():t.data("current_time")}function setDisplayTime(e,t){var i=$("#display-text");if(t)i.text(e).css("font-family","roboto_condensedregular");else if(""==e)i.data("current_time","000000").text("Enter a time").css("font-family","roboto_condensedregular");else{i.data("current_time",e).css("font-family","robotoregular");for(var a=getDisplayTime(),s=[],o=["h","m","s"],l=0;3>l;l++){var n=a.slice(2*l,2*l+2);(n>0||s[0]||2==l)&&(10>n&&!s[0]&&(n=n.slice(-1)),s.push(n+o[l]))}var r=s.join(" ");r!=i.text()&&i.text(r)}}function startTimer(){$("#display").data("input_mode",!1),$("#display").velocity("stop").velocity({height:"90%"},{duration:400,easing:"easeOutExpo"}),$("#keypad td").velocity("stop").velocity("fadeOut",200),$("#edit-button").velocity("stop").velocity("fadeIn",100),$("#dial-ring").velocity("stop").velocity({opacity:[1,0],scale:[1,.9]},{easing:"easeOutExpo",duration:400,delay:200,display:"block"});var e=getDisplayTime(),t=3600*e.slice(-6,-4),i=60*e.slice(-4,-2),a=1*e.slice(-2),s=t+i+a;setTime(s)}function editTime(){$("#display").data("input_mode",!0),$("#dial-ring path").velocity("stop"),$("#display").velocity("stop").velocity({height:"20%"},{duration:400,easing:"easeOutExpo"}),$("#keypad td").velocity("stop").velocity("fadeIn",{duration:200,display:""}),$("#edit-button").velocity("stop").velocity("fadeOut",100),$("#dial-ring").velocity("stop").velocity("fadeOut",200)}var WHOLE_CIRCLE=.99999999;if("createTouch"in document)try{for(var ignore=/:hover/,i=0;i<document.styleSheets.length;i++)for(var sheet=document.styleSheets[i],j=sheet.cssRules.length-1;j>=0;j--){var rule=sheet.cssRules[j];rule.type===CSSRule.STYLE_RULE&&ignore.test(rule.selectorText)&&sheet.deleteRule(j)}}catch(e){}$(function(){$("#display").data("input_mode",!0),setDisplayTime(""),$("#keypad td").on("tap",function(){var e=$(this).text();if("Clear"==e)setDisplayTime("000000");else if("Start"==e)startTimer();else{var t=(getDisplayTime()+e).slice(-6);setDisplayTime(t)}}),$("#edit-button").on("tap",function(){editTime()}),$(document).on("keypress",function(e){var t=e.keyCode;if(t>=48&&57>=t&&$("#display").data("input_mode")){var i=String.fromCharCode(t),a=(getDisplayTime()+i).slice(-6);setDisplayTime(a)}else if(13==t)$("#display").data("input_mode")?startTimer():editTime();else if(8==t&&$("#display").data("input_mode")){var a=("0"+getDisplayTime()).slice(-7,-1);setDisplayTime(a)}})}),$(window).on("load resize orientationChange",function(){var e=Math.min(window.innerHeight,window.innerWidth);$("body").css("font-size",e/9)});