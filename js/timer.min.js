!function(){"use strict";function a(){return $("#display-text").data("currentTime")}function b(a){var b=3600*a.slice(-6,-4),c=60*a.slice(-4,-2),d=1*a.slice(-2),e=b+c+d;return e>0&&36e4>e}function c(a,b){var c=!1,d="",e="1rem",f="",g=$("#display-text").clone(!0).attr("id","display-text-old");switch(a){case"000000":case"":a="0s";case"Done":f="000000";case"Paused":d=a,c=!0;break;default:if($("#display-text").data("currentTime")!==a||"Paused"===$("#display-text").text()){for(var h=[],i=["h","m","s"],j=0;3>j;j++){var k=a.slice(2*j,2*j+2);(k>0||h[0]||2===j)&&(10>k&&!h[0]&&(k=k.slice(-1)),h.push(k+i[j]))}var l=h.join(" ");if(.9*o>n&&l.length>8){if(1.5*n>o){var m=1/.9,p=1.5,q=o/n,r=(p-q)/(p-m);e=8/l.length*(1-r)+r}else e=8/l.length;e+="rem"}f=a,d=l,c=!0}}if(c){if($("#display-text-old").remove(),"crossfade"===b){var t=$("#display-text").text(),v=d,w="",x="";if(t.length===v.length)for(var y=0;y<t.length;y++)t[y]===v[y]?(w+=t[y],x+=v[y]):(w+="<span>"+t[y]+"</span>",x+="<span>"+v[y]+"</span>");else w="<span>"+t+"</span>",x="<span>"+v+"</span>";var z=/<\/span><span>/gi;g.html(w.replace(z,"").replace(" ","&nbsp;")).children("span").velocity({opacity:[0,1],scale:0},{easing:s,duration:Math.min(u,1e3),queue:!1,display:"inline-block",complete:function(){$(this).parent().remove()}}).end().prependTo($("#display-text").parent()),$("#display-text").data("currentTime",f).html(x.replace(z,"").replace(" ","&nbsp;")).css({fontFamily:"robotoregular"}).children("span").css("opacity",0).velocity({opacity:1,scale:[1,0]},{easing:s,duration:Math.min(u,1e3),queue:!1,display:"inline-block",complete:function(){$(this).contents().unwrap()}})}else $("#display-text").data("currentTime",f).css({fontFamily:"robotoregular"}).html(d);$("#display-text").add(g).velocity({fontSize:e},{easing:s,duration:u,queue:!1})}}function d(b){var d=(a()+b).slice(-6);c(d)}function e(b,d){var e=a(),g=3600*e.slice(-6,-4),h=60*e.slice(-4,-2),i=1*e.slice(-2),j=g+h+i;$.Velocity.hook($("#display-text"),"translateY","-50%"),0!==j||b||d?36e4>j||d||b?(f(j,b||d),$("#display").data("inputMode",!1).addClass("running"),b||($("#display").velocity("stop").velocity({height:"90%",translateY:0},{duration:u,easing:s}),$("#keypad").velocity("stop").velocity({scaleX:0,scaleY:0,opacity:0},{easing:s,duration:u,display:"none"}),$("#edit-button").velocity("stop").velocity({translateY:[0,"100%"],opacity:[1,0]},{easing:s,duration:u,display:"block"}),$("#dial-ring").velocity("stop").velocity({opacity:[1,0],scale:[1,0]},{easing:s,duration:u,display:"block"}))):(p.show("The time entered was too high. Enter a time less than 100 hours"),c("")):p.show("Please enter a time first")}function f(a,b){var d=b?$("#dial-ring path").data("timeLeft"):1e3*a,e=b?$("#dial-ring path").data("progress"):0;$("#dial-ring path").velocity("stop").velocity({tween:[q,e]},{duration:d,easing:"linear",begin:function(){localStorage.setItem("timeStarted",(new Date).getTime()),localStorage.setItem("durationSet",d)},progress:function(a,b,d,e,f){g($("#dial-ring path"),40,f),$("#dial-ring path").data("progress",f),$("#dial-ring path").data("timeLeft",d);var h=Math.ceil(d/1e3),i=Math.floor(h/60)%60,j=Math.floor(h/3600),k=h%60;k=("0"+k).slice(-2),i=("0"+i).slice(-2),j=("0"+j).slice(-2);var l=[j,i,k];0!==d&&c(l.join(""),"crossfade")},complete:function(){c("Done","crossfade"),$("#display").removeClass("running"),localStorage.setItem("timeStarted",0),localStorage.setItem("durationSet",0)}})}function g(a,b,c){var d=50,e=d-b,f=c>=.5?1:0,g=e+b*(1+Math.sin(2*Math.PI*c)),h=e+b*(1-Math.cos(2*Math.PI*c)),i=g+" "+h,j=b+" "+b,k=" 0 "+f+" 1 ",l="M"+d+" "+d,m="m0 "+-b,n="A"+j+k+i,o=l+m+n;a.attr("d",o)}function h(){c(a(),"crossfade"),$("#display").data("inputMode",!0).data("paused",!1).removeClass("running"),localStorage.setItem("timeStarted",0),localStorage.setItem("durationSet",0),$("#dial-ring path").velocity("stop"),$("#display").velocity("stop").velocity({height:"20%"},{duration:u,easing:s}),$("#keypad").velocity("stop").velocity({scaleX:[1,.5],scaleY:1,opacity:1},{easing:s,duration:u,display:"table"}),$("#edit-button").velocity("stop").velocity({opacity:0,translateY:"-700%"},{easing:s,display:"none",duration:u,complete:function(){$.Velocity.hook($(this),"translateY","0")}}),$("#dial-ring").velocity("stop").velocity("fadeOut",100)}function i(){$("#display").data("inputMode")||($("#display").data("paused")?(e(!0),$("#display").data("paused",!1),$("#dial-ring").velocity("stop").velocity({opacity:1},{easing:s,duration:u})):$("#display").hasClass("running")?($("#dial-ring path").velocity("stop"),c("Paused","crossfade"),$("#display").data("paused",!0),$("#dial-ring").velocity("stop").velocity({opacity:.25},{easing:s,duration:u})):h())}function j(a){if(0===arguments.length){var b=!$("#keyboard-help").data("shown");$("#keyboard-help").data("shown",b).velocity("stop").velocity({scaleY:b?[1,0]:[0,1],scaleX:b?[1,.5]:[0,1],opacity:b?[1,0]:[0,1]},{easing:b?s:t,display:b?"block":"none",duration:b?u:u/2})}else($("#keyboard-help").data("shown")||!1)!==a&&j()}function k(){if("ontouchstart"in document.documentElement)for(var a=document.styleSheets.length-1;a>=0;a--){var b=document.styleSheets[a];if(b.cssRules)for(var c=b.cssRules.length-1;c>=0;c--){var d=b.cssRules[c];d.selectorText&&(d.selectorText=d.selectorText.replace(":hover",":active"))}}}function l(a,b){b=b?b:window.location.search;var c=new RegExp("&amp;"+a+"=([^&amp;]*)","i");return b=(b=b.replace(/^\?/,"&amp;").match(c))?b[1]:""}function m(a){return a in document.body.style}var n,o,p,q=.99999,r="Expo",s="easeOut"+r,t="easeIn"+r,u=300;$(function(){p=function(){var a=$("#notification-banner"),b=a.find("span"),c=function(c,d){b.text(c);var e=b.siblings("div").empty();if(d){$("#content").css("pointer-events","none");for(var f=d.length-1;f>=0;f--){var g=d[f];$("<div></div>").text(g.text).addClass(g.style+" button").click(g.clickFunction).prependTo(e)}}else clearTimeout(b.data("hideTimeout")),b.data("hideTimeout",setTimeout(p.hide,5e3));a.velocity("stop").velocity({translateY:a.data("shown")?0:[0,"-100%"]},{easing:s,display:"block",duration:u,complete:function(){d?$("#content").on("click.bannerhide",p.hide):$(document).on("click.bannerhide",p.hide)}}).data("shown",!0)},d=function(){$(document).off("click.bannerhide",p.hide),$("#content").off("click.bannerhide",p.hide).css("pointer-events",""),a.data("shown")&&a.data("shown",!1).velocity("stop").velocity({translateY:"-100%"},{easing:t,display:"none",duration:u/2})};return{show:c,hide:d}}(),FastClick.attach(document.body),$.Velocity.hook($("#keyboard-help"),"translateX","-50%"),$.Velocity.hook($("#keyboard-help"),"translateY","-50%"),$.Velocity.hook($("#display-text"),"translateX","-50%"),$.Velocity.hook($("#display-text"),"translateY","-50%"),$.Velocity.hook($("#keypad"),"translateX","-50%"),navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)&&$("#keyboard-help").find(".delete").text("Delete"),window.navigator.standalone&&$(document).on("touchmove",!1),k(),(m("-webkit-backdrop-filter")||m("-moz-backdrop-filter")||m("-o-backdrop-filter")||m("-ms-backdrop-filter")||m("backdrop-filter"))&&$("body").addClass("backdrop-filter"),$("#display").data("inputMode",!0),$.Velocity.hook($("#keypad"),"scaleX",.5),$.Velocity.hook($("#keypad"),"scaleY",0),$.Velocity.hook($("#keypad"),"opacity",0);var f=l("time");b(f)?($.Velocity.hook($("#display"),"translateY","-100%"),c(("000000"+f).slice(-6)),e()):($.Velocity.hook($("#display"),"height","100%"),$.Velocity.hook($("#display-text"),"opacity",0),$("#keypad").velocity({opacity:1,scaleX:1,scaleY:1},{easing:s,duration:u}),$("#display-text").velocity({opacity:1},{easing:s,duration:u}),$("#display").velocity({height:"20%"},{easing:s,duration:u,complete:function(){function a(){return b+c-(new Date).getTime()}var b=parseInt(localStorage.getItem("timeStarted")),c=parseInt(localStorage.getItem("durationSet"));if(b&&c){var d=5;if(a()>1e3*d){var f="Seems like the timer was still running when you last closed this app. Do you want to restore the timer?",g={text:"No",style:"alert",clickFunction:function(){localStorage.setItem("timeStarted","0"),localStorage.setItem("durationSet","0")}},h={text:"Sure",style:"emphasize",clickFunction:function(){var b=1-a()/c;a()>0?($("#dial-ring path").data("timeLeft",a()).data("progress",b),e(!1,!0)):p.show("Too late, the timer has already ended")}};p.show(f,[g,h])}}}})),$("#display-text").data("currentTime","000000"),$("#keypad").on("click","td",function(){var a=$(this).text();"Clear"===a?c(""):"Start"===a?e():d(a)}),$("#edit-button").click(h),$("#display").on("click","#display-text",i),$("#notification-banner").on("click",".button",p.hide),$(document).on("keydown",function(b){var f=b.keyCode;if($("#notification-banner").data("shown")){if(""!==$("#notification-banner").find("div").text()){switch(f){case 13:$("#notification-banner").find(".emphasize").click();break;case 27:$("#notification-banner").find(".alert").click()}return!1}p.hide()}switch(f){case 8:if(b.preventDefault(),$("#display").data("inputMode")){var g=("0"+a()).slice(-7,-1);c(g)}break;case 13:$("#display").data("inputMode")?e():h();break;case 27:$("#display").data("inputMode")||h();break;case 32:$("#display").data("inputMode")?j():i();break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:if($("#display").data("inputMode")){var k=String.fromCharCode(f);d(k);break}}32!==f&&j(!1)}),$(document).on("touchstart",function(){localStorage.setItem("touch-device","true")}),$(document).click(function(a){$(a.target).hasClass("button")||j(!1);var b=localStorage.getItem("touch-device"),c=localStorage.getItem("mouse-suggested"),d=sessionStorage.getItem("mouse-suggested"),e="temp"===c,f=e&&!d;b||c&&!f||(localStorage.setItem("mouse-suggested","true"),sessionStorage.setItem("mouse-suggested","true"),p.show("Seems like you have a keyboard. Want to learn a few shortcuts?",[{text:"Never",style:"alert",clickFunction:function(){}},{text:"Not right now",style:"normal",clickFunction:function(){localStorage.setItem("mouse-suggested","temp")}},{text:"Yes, show me",style:"emphasize",clickFunction:function(){j(!0)}}]))}),$(window).on("load resize orientationChange",function(){n=$(window).width(),o=$(window).height();var a=Math.min(1.5*n,o);$.Velocity.hook($("html"),"fontSize",a/9+"px")})})}();
//# sourceMappingURL=timer.min.js.map