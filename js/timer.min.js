!function(){"use strict";function a(a,b){var c=!1,d="",e="1rem",f="",g=$("#display-text").clone(!0).attr("id","display-text-old");switch(a){case"000000":case"":a="0s";case"Done":f="000000";case"Paused":d=a,c=!0;break;default:if($("#display-text").data("currentTime")!==a||"Paused"===$("#display-text").text()){for(var h=[],i=["h","m","s"],l=0;3>l;l++){var m=a.slice(2*l,2*l+2);(m>0||h[0]||2===l)&&(10>m&&!h[0]&&(m=m.slice(-1)),h.push(m+i[l]))}var n=h.join(" ");if(.9*k>j&&n.length>8){if(1.5*j>k){var o=1/.9,p=1.5,q=k/j,r=(p-q)/(p-o);e=8/n.length*(1-r)+r}else e=8/n.length;e+="rem"}f=a,d=n,c=!0}}if(c){if($("#display-text-old").remove(),"crossfade"===b){var s=$("#display-text").text(),t=d,u="",w="";if(s.length===t.length)for(var y=0;y<s.length;y++)s[y]===t[y]?(u+=s[y],w+=t[y]):(u+="<span>"+s[y]+"</span>",w+="<span>"+t[y]+"</span>");else u="<span>"+s+"</span>",w="<span>"+t+"</span>";var z=/<\/span><span>/gi;g.html(u.replace(z,"").replace(" ","&nbsp;")).children("span").velocity({opacity:[0,1],scale:0},{easing:v,duration:Math.min(x,1e3),queue:!1,display:"inline-block",complete:function(){$(this).parent().remove()}}).end().prependTo($("#display-text").parent()),$("#display-text").data("currentTime",f).html(w.replace(z,"").replace(" ","&nbsp;")).css({fontFamily:"robotoregular"}).children("span").css("opacity",0).velocity({opacity:1,scale:[1,0]},{easing:v,duration:Math.min(x,1e3),queue:!1,display:"inline-block",complete:function(){$(this).contents().unwrap()}})}else $("#display-text").data("currentTime",f).css({fontFamily:"robotoregular"}).html(d);$("#display-text").add(g).velocity({fontSize:e},{easing:v,duration:x,queue:!1})}}function b(b,d){var e=q.time,f=3600*e.slice(-6,-4),g=60*e.slice(-4,-2),h=1*e.slice(-2),i=f+g+h;$.Velocity.hook($("#display-text"),"translateY","-50%"),0!==i||b||d?36e4>i||d||b?(c(i,b||d),$("#display").data("inputMode",!1).addClass("running"),b||($("#display").velocity("stop").velocity({height:"90%",translateY:0},{duration:x,easing:v}),$("#keypad").velocity("stop").velocity({scaleX:0,scaleY:0,opacity:0},{easing:v,duration:x,display:"none"}),$("#edit-button").velocity("stop").velocity({translateY:[0,"100%"],opacity:[1,0]},{easing:v,duration:x,display:"block"}),$("#dial-ring").velocity("stop").velocity({opacity:[1,0],scale:[1,0]},{easing:v,duration:x,display:"block"}))):(m.show("The time entered was too high. Enter a time less than 100 hours"),a("")):m.show("Please enter a time first")}function c(b,c){var e=c?$("#dial-ring path").data("timeLeft"):1e3*b,f=c?$("#dial-ring path").data("progress"):0;$("#dial-ring path").velocity("stop").velocity({tween:[t,f]},{duration:e,easing:"linear",begin:function(){localStorage.setItem("timeStarted",(new Date).getTime()),localStorage.setItem("durationSet",e)},progress:function(b,c,e,f,g){d($("#dial-ring path"),40,g),$("#dial-ring path").data("progress",g),$("#dial-ring path").data("timeLeft",e);var h=Math.ceil(e/1e3),i=Math.floor(h/60)%60,j=Math.floor(h/3600),k=h%60;k=("0"+k).slice(-2),i=("0"+i).slice(-2),j=("0"+j).slice(-2);var l=[j,i,k];0!==e&&a(l.join(""),"crossfade")},complete:function(){a("Done","crossfade"),$("#display").removeClass("running"),localStorage.setItem("timeStarted",0),localStorage.setItem("durationSet",0)}})}function d(a,b,c){var d=50,e=d-b,f=c>=.5?1:0,g=e+b*(1+Math.sin(2*Math.PI*c)),h=e+b*(1-Math.cos(2*Math.PI*c)),i=g+" "+h,j=b+" "+b,k=" 0 "+f+" 1 ",l="M"+d+" "+d,m="m0 "+-b,n="A"+j+k+i,o=l+m+n;a.attr("d",o)}function e(){a(q.time,"crossfade"),$("#display").data("inputMode",!0).data("paused",!1).removeClass("running"),localStorage.setItem("timeStarted",0),localStorage.setItem("durationSet",0),$("#dial-ring path").velocity("stop"),$("#display").velocity("stop").velocity({height:"20%"},{duration:x,easing:v}),$("#keypad").velocity("stop").velocity({scaleX:[1,.5],scaleY:1,opacity:1},{easing:v,duration:x,display:"table"}),$("#edit-button").velocity("stop").velocity({opacity:0,translateY:"-700%"},{easing:v,display:"none",duration:x,complete:function(){$.Velocity.hook($(this),"translateY","0")}}),$("#dial-ring").velocity("stop").velocity("fadeOut",100)}function f(){$("#display").data("inputMode")||($("#display").data("paused")?(b(!0),$("#display").data("paused",!1),$("#dial-ring").velocity("stop").velocity({opacity:1},{easing:v,duration:x})):$("#display").hasClass("running")?($("#dial-ring path").velocity("stop"),a("Paused","crossfade"),$("#display").data("paused",!0),$("#dial-ring").velocity("stop").velocity({opacity:.25},{easing:v,duration:x})):e())}function g(){if("ontouchstart"in document.documentElement)for(var a=document.styleSheets.length-1;a>=0;a--){var b=document.styleSheets[a];if(b.cssRules)for(var c=b.cssRules.length-1;c>=0;c--){var d=b.cssRules[c];d.selectorText&&(d.selectorText=d.selectorText.replace(":hover",":active"))}}}function h(a,b){b=b?b:window.location.search;var c=new RegExp("&amp;"+a+"=([^&amp;]*)","i");return b=(b=b.replace(/^\?/,"&amp;").match(c))?b[1]:""}function i(a){return a in document.body.style}var j,k,l,m,n,o,p,q,r,s,t=.99999,u="Expo",v="easeOut"+u,w="easeIn"+u,x=300;$(function(){var c=function(){var a={},b=a.hasOwnProperty;return{subscribe:function(c,d){b.call(a,c)||(a[c]=[]);var e=a[c].push(d)-1;return{remove:function(){delete a[c][e]}}},publish:function(c,d){b.call(a,c)&&a[c].forEach(function(a){a(void 0!=d?d:{})})}}}();o=function(){var d=$(window),o=$(document);FastClick.attach(document.body),g(),window.navigator.standalone&&o.on("touchmove",!1),(i("-webkit-backdrop-filter")||i("-moz-backdrop-filter")||i("-o-backdrop-filter")||i("-ms-backdrop-filter")||i("backdrop-filter"))&&$("body").addClass("backdrop-filter"),o.on("keydown",function(c){var d=c.keyCode;if(m.isShown){if(m.isEmpty){switch(d){case 13:m.clickButton("emphasize");break;case 27:m.clickButton("alert")}return!1}if(m.hide(),13===d)return!1}switch(d){case 8:if(c.preventDefault(),r.inputMode){var g=("0"+q.time).slice(-7,-1);a(g)}break;case 13:r.inputMode?b():e();break;case 27:r.inputMode||e();break;case 32:r.inputMode?n.toggle():f();break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:if(r.inputMode){var h=String.fromCharCode(d);q.addDigit(h);break}}32!==d&&n.toggle(!1)}),o.on("touchstart",function(){localStorage.setItem("touch-device","true")}),d.on("load resize orientationChange",function(){j=d.width(),k=d.height();var a=Math.min(1.5*j,k);$.Velocity.hook($("html"),"fontSize",a/9+"px")}),o.click(function(a){$(a.target).hasClass("button")||n.toggle(!1);var b=localStorage.getItem("touch-device"),c=localStorage.getItem("mouse-suggested"),d=sessionStorage.getItem("mouse-suggested"),e="temp"===c,f=e&&!d;b||c&&!f||(localStorage.setItem("mouse-suggested","true"),sessionStorage.setItem("mouse-suggested","true"),m.show("Seems like you have a keyboard. Want to learn a few shortcuts?",[{text:"Never",style:"alert",clickFunction:function(){}},{text:"Not right now",style:"normal",clickFunction:function(){localStorage.setItem("mouse-suggested","temp")}},{text:"Yes, show me",style:"emphasize",clickFunction:function(){n.toggle(!0)}}]))}),c.subscribe("startup",function(){l=q.validateTime(h("time"))?"given":"normal"}),c.subscribe("startup.given",function(){a(("000000"+h("time")).slice(-6)),b()})}(),r=function(){var a=$("#display");return a.data("inputMode",!0),c.subscribe("startup.given",function(){$.Velocity.hook(a,"translateY","-100%")}),c.subscribe("startup.normal",function(){$.Velocity.hook(a,"height","100%"),a.velocity({height:"20%"},{easing:v,duration:x,complete:function(){function a(){return c+d-(new Date).getTime()}var c=parseInt(localStorage.getItem("timeStarted")),d=parseInt(localStorage.getItem("durationSet"));if(c&&d){var e=5;if(a()>1e3*e){var f="Seems like the timer was still running when you last closed this app. Do you want to restore the timer?",g={text:"No",style:"alert",clickFunction:function(){localStorage.setItem("timeStarted","0"),localStorage.setItem("durationSet","0")}},h={text:"Sure",style:"emphasize",clickFunction:function(){var c=1-a()/d;a()>0?($("#dial-ring path").data("timeLeft",a()).data("progress",c),b(!1,!0)):m.show("Too late, the timer has already ended")}};m.show(f,[g,h])}}}})}),{get inputMode(){return a.data("inputMode")}}}(),p=function(){var d=$("#keypad");$.Velocity.hook(d,"translateX","-50%"),$.Velocity.hook(d,"scaleX",.5),$.Velocity.hook(d,"scaleY",0),$.Velocity.hook(d,"opacity",0),d.on("click","td",function(){var c=$(this).text();"Clear"===c?a(""):"Start"===c?b():q.addDigit(c)}),c.subscribe("startup.normal",function(){d.velocity({opacity:1,scaleX:1,scaleY:1},{easing:v,duration:x})})}(),q=function(){var b=$("#display-text");b.data("currentTime","000000"),$.Velocity.hook(b,"translateX","-50%"),$.Velocity.hook(b,"translateY","-50%"),b.click(f),c.subscribe("startup.normal",function(){$.Velocity.hook(b,"opacity",0),b.velocity({opacity:1},{easing:v,duration:x})});var d=function(c){a((b.data("currentTime")+c).slice(-6))},e=function(a){var b=3600*a.slice(-6,-4),c=60*a.slice(-4,-2),d=1*a.slice(-2),e=b+c+d;return e>0&&36e4>e};return{addDigit:d,validateTime:e,get time(){return b.data("currentTime")}}}(),m=function(){var a,b=$("#notification-banner"),c=b.find("span"),d=function(d,e){c.text(d);var f=c.siblings("div").empty();if(e){$("#content").css("pointer-events","none");for(var g=e.length-1;g>=0;g--){var h=e[g];$("<div></div>").text(h.text).addClass(h.style+" button").click(h.clickFunction).prependTo(f)}}else clearTimeout(a),a=setTimeout(m.hide,5e3);b.velocity("stop").velocity({translateY:b.data("shown")?0:[0,"-100%"]},{easing:v,display:"block",duration:x,complete:function(){e?$("#content").on("click.bannerhide",m.hide):$(document).on("click.bannerhide",m.hide)}}).data("shown",!0)},e=function(){$(document).off("click.bannerhide",m.hide),$("#content").off("click.bannerhide",m.hide).css("pointer-events",""),b.data("shown")&&b.data("shown",!1).velocity("stop").velocity({translateY:"-100%"},{easing:w,display:"none",duration:x/2})},f=function(a){b.find("."+a).click()};return b.on("click",".button",e),{show:d,hide:e,clickButton:f,get isShown(){return b.data("shown")},get isEmpty(){return""!==b.find("div").text()}}}(),n=function(){var a=$("#keyboard-help");$.Velocity.hook(a,"translateX","-50%"),$.Velocity.hook(a,"translateY","-50%"),navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)&&a.find(".delete").text("Delete");var b=function(c){if(0===arguments.length){var d=!a.data("shown");a.data("shown",d).velocity("stop").velocity({scaleY:d?[1,0]:[0,1],scaleX:d?[1,.5]:[0,1],opacity:d?[1,0]:[0,1]},{easing:d?v:w,display:d?"block":"none",duration:d?x:x/2})}else(a.data("shown")||!1)!==c&&b()};return{toggle:b}}(),s=function(){var a=$("#edit-button");a.click(e)}(),c.publish("startup"),c.publish("startup."+l)})}();
//# sourceMappingURL=timer.min.js.map