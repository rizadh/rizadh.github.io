"use strict";function setDial(t,e,i){var a=i>=.5?1:0,o=e*(1+Math.sin(2*Math.PI*i)),s=e*(1-Math.cos(2*Math.PI*i)),n=o+" "+s,l=e+" "+e,d=" 0 "+a+" 1 ",r="M"+e+" "+e,c="L"+e+" 0",p="A"+l+d+n,y=r+c+p;t.attr("d",y)}function setTime(t){var e=1e3*t;$("#dial-ring path").velocity({tween:WHOLE_CIRCLE},{duration:e,easing:"linear",progress:function(t,e,i,a,o){setDial($("#dial-ring path"),50,o);var s=Math.ceil(i/1e3),n=Math.floor(s/60)%60,l=Math.floor(s/3600);s%=60,s=("0"+s).slice(-2),n=("0"+n).slice(-2),l=("0"+l).slice(-2),setDisplayTime([l,n,s].join(""),!1)}})}function getDisplayTime(t){var e=$("#display-text");return t?e.text():e.data("current_time")}function setDisplayTime(t,e){var i=$("#display-text");if(e)i.text(t).css("font-family","roboto_condensedregular");else if(""==t)i.data("current_time","000000").text("Enter a time").css("font-family","roboto_condensedregular");else{i.data("current_time",t).css("font-family","robotoregular");for(var a=getDisplayTime(),o=[],s=["h","m","s"],n=0;3>n;n++){var l=a.slice(2*n,2*n+2);(l>0||o[0]||2==n)&&(10>l&&!o[0]&&(l=l.slice(-1)),o.push(l+s[n]))}var d=o.join(" ");d!=i.text()&&i.text(d)}}function startTimer(){$("#display").data("input_mode",!1),$("#display").velocity("stop").velocity({height:"90%"},{duration:400,easing:"easeOutExpo"}),$("#keypad td").velocity("stop").velocity("fadeOut",200),$("#edit-button").velocity("stop").velocity("fadeIn",100),$("#dial-ring").velocity("stop").velocity({opacity:[1,0],scale:[1,.9]},{easing:"easeOutExpo",duration:400,delay:200,display:"block"});var t=getDisplayTime(),e=3600*t.slice(-6,-4),i=60*t.slice(-4,-2),a=1*t.slice(-2),o=e+i+a;setTime(o)}function editTime(){$("#display").data("input_mode",!0),$("#dial-ring path").velocity("stop"),$("#display").velocity("stop").velocity({height:"20%"},{duration:400,easing:"easeOutExpo"}),$("#keypad td").velocity("stop").velocity("fadeIn",{duration:200,display:""}),$("#edit-button").velocity("stop").velocity("fadeOut",100),$("#dial-ring").velocity("stop").velocity("fadeOut",200)}var WHOLE_CIRCLE=.99999999;$(function(){$("#display").data("input_mode",!0),setDisplayTime(""),$("#keypad td").on("tap",function(){var t=$(this).text();if("Clear"==t)setDisplayTime("000000");else if("Start"==t)startTimer();else{var e=(getDisplayTime()+t).slice(-6);setDisplayTime(e)}}),$("#edit-button").on("tap",function(){editTime()}),$(document).on("keypress",function(t){var e=t.keyCode;if(e>=48&&57>=e&&$("#display").data("input_mode")){var i=String.fromCharCode(e),a=(getDisplayTime()+i).slice(-6);setDisplayTime(a)}else if(13==e)$("#display").data("input_mode")?startTimer():editTime();else if(8==e&&$("#display").data("input_mode")){var a=("0"+getDisplayTime()).slice(-7,-1);setDisplayTime(a)}})}),$(window).on("load resize orientationChange",function(){var t=Math.min(window.innerHeight,window.innerWidth);$("body").css("font-size",t/9)});