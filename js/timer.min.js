"use strict";function startupAnimation(){var e=800;$.Velocity.hook($("#display-text"),"translateY","-100%"),$("#display-text").velocity({translateY:"-50%"},{easing:"easeOutExpo",duration:e}),$.Velocity.hook($("#display"),"translateY","-100%"),$("#display").velocity({translateY:0},{easing:"easeOutExpo",duration:e}),$.Velocity.hook($("#keypad td"),"scale","0"),$.Velocity.hook($("#keypad td"),"opacity","0"),$.Velocity.RegisterEffect("transition.pop",{calls:[[{scale:1,opacity:1}]]});var t=!0;$("#keypad td").velocity(t?"transition.pop":{scale:1},{easing:"easeOutExpo",duration:e/4,delay:e/4,stagger:e/4/9,drag:!0})}function setDial(e,t,i){var a=i>=.5?1:0,o=t*(1+Math.sin(2*Math.PI*i)),s=t*(1-Math.cos(2*Math.PI*i)),l=o+" "+s,n=t+" "+t,r=" 0 "+a+" 1 ",c="M"+t+" "+t,d="L"+t+" 0",p="A"+n+r+l,y=c+d+p;e.attr("d",y)}function setTime(e){var t=1e3*e;$("#dial-ring path").velocity({tween:WHOLE_CIRCLE},{duration:t,easing:"linear",progress:function(e,t,i,a,o){setDial($("#dial-ring path"),50,o);var s=Math.ceil(i/1e3),l=Math.floor(s/60)%60,n=Math.floor(s/3600);s%=60,s=("0"+s).slice(-2),l=("0"+l).slice(-2),n=("0"+n).slice(-2);var r=[n,l,s];setDisplayTime(r.join(""),!1)}})}function getDisplayTime(e){var t=$("#display-text");return e?t.text():t.data("current_time")}function setDisplayTime(e,t){var i=$("#display-text");if(t)i.text(e).css("font-family","roboto_condensedregular");else if(""===e)i.data("current_time","000000").text("Enter a time").css("font-family","roboto_condensedregular");else{i.data("current_time",e).css("font-family","robotoregular");for(var a=getDisplayTime(),o=[],s=["h","m","s"],l=0;3>l;l++){var n=a.slice(2*l,2*l+2);(n>0||o[0]||2==l)&&(10>n&&!o[0]&&(n=n.slice(-1)),o.push(n+s[l]))}var r=o.join(" ");r!=i.text()&&i.text(r)}}function startTimer(){$("#display").data("input_mode",!1),$("#display").velocity("stop").velocity({height:"90%"},{duration:400,easing:"easeOutExpo"}),$("#keypad").velocity("stop").velocity("fadeOut",200),$("#edit-button").velocity("stop").velocity("fadeIn",100),$("#dial-ring").velocity("stop").velocity({opacity:[1,0],scale:[1,0]},{easing:"easeOutExpo",duration:400,display:"block"});var e=getDisplayTime(),t=3600*e.slice(-6,-4),i=60*e.slice(-4,-2),a=1*e.slice(-2),o=t+i+a;setTime(o)}function editTime(){$("#display").data("input_mode",!0),$("#dial-ring path").velocity("stop"),$("#display").velocity("stop").velocity({height:"20%"},{duration:400,easing:"easeOutExpo"}),$("#keypad").velocity("stop").velocity("fadeIn",200),$("#edit-button").velocity("stop").velocity("fadeOut",100),$("#dial-ring").velocity("stop").velocity("fadeOut",100)}function toggleKeyboardHelp(e){var t=$("#keyboard-help-wrapper");if(e)t.data("shown")&&toggleKeyboardHelp();else{var i;i=t.data("shown")?!1:!0,t.data("shown",i).velocity("stop").velocity(i?"fadeIn":"fadeOut",i?200:100)}}function hoverTouchUnstick(){if("ontouchstart"in document.documentElement)for(var e=document.styleSheets.length-1;e>=0;e--){var t=document.styleSheets[e];if(t.cssRules)for(var i=t.cssRules.length-1;i>=0;i--){var a=t.cssRules[i];a.selectorText&&(a.selectorText=a.selectorText.replace(":hover",":active"))}}}var WHOLE_CIRCLE=.99999999;$(function(){navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)&&$("#keyboard-help > .shortcut.delete > span").text("Delete"),hoverTouchUnstick(),$("#display").data("input_mode",!0),startupAnimation(),setDisplayTime(""),$("#keypad td").on("tap",function(){var e=$(this).text();if("Clear"==e)setDisplayTime("000000");else if("Start"==e)startTimer();else{var t=(getDisplayTime()+e).slice(-6);setDisplayTime(t)}}),$("#edit-button").on("tap",function(){editTime()}),$("#keyboard-help").on("tap",function(){toggleKeyboardHelp(!0)}),$(document).on("keydown",function(e){var t=e.keyCode;if(t>=48&&57>=t&&$("#display").data("input_mode")){var i=String.fromCharCode(t),a=(getDisplayTime()+i).slice(-6);setDisplayTime(a)}else if(13==t)$("#display").data("input_mode")?startTimer():editTime();else if(8==t){if(e.preventDefault(),$("#display").data("input_mode")){var o=("0"+getDisplayTime()).slice(-7,-1);setDisplayTime(o)}}else 32==t&&toggleKeyboardHelp()})}),$(window).on("load resize orientationChange",function(){var e=Math.min(window.innerHeight,window.innerWidth);$("html").css("font-size",e/9)});