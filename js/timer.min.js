$(function(){"use strict";var a,b,c,d,e=.99999,f="Expo",g="easeOut"+f,h="easeIn"+f,i=300;Ripple.enable("1.5em","white",750);var j=function(){var a={},b=a.hasOwnProperty;return{subscribe:function(c,d){b.call(a,c)||(a[c]=[]);var e=a[c].push(d)-1;return{remove:function(){delete a[c][e]}}},publish:function(c,d){b.call(a,c)&&a[c].forEach(function(a){a(void 0!==d?d:{})})}}}(),k=function(){function e(a,b){var c=m.time,d=3600*c.slice(-6,-4),e=60*c.slice(-4,-2),f=1*c.slice(-2),g=d+e+f;0!==g||a||b?36e4>g||b||a?(p.wind(g,a||b),l.inputMode=!1,a||j.publish("start")):(n.show("The time entered was too high. Enter a time less than 100 hours"),m.setTime("")):n.show("Please enter a time first")}function f(){localStorage.setItem("timeStarted",0),localStorage.setItem("durationSet",0),j.publish("edit")}function g(){l.inputMode?k.startTimer():l.paused?(k.startTimer(!0),l.paused=!1,j.publish("resume")):l.running?(m.setTime("Paused","crossfade"),l.paused=!0,j.publish("pause")):k.editTime()}function h(a){return a in document.body.style}var i=$(window),q=$(document);if(FastClick.attach(document.body),"ontouchstart"in document.documentElement)for(var r=document.styleSheets.length-1;r>=0;r--){var s=document.styleSheets[r];if(s.cssRules)for(var t=s.cssRules.length-1;t>=0;t--){var u=s.cssRules[t];u.selectorText&&(u.selectorText=u.selectorText.replace(":hover",":active"))}}return window.navigator.standalone&&q.on("touchmove",!1),(h("-webkit-backdrop-filter")||h("-moz-backdrop-filter")||h("-o-backdrop-filter")||h("-ms-backdrop-filter")||h("backdrop-filter"))&&$("body").addClass("backdrop-filter"),q.on("keydown",function(a){var b=a.keyCode;if(n.isShown){if(n.isEmpty){switch(b){case 13:n.clickButton("emphasize");break;case 27:n.clickButton("alert")}return!1}if(n.hide(),13===b)return!1}switch(b){case 8:if(a.preventDefault(),l.inputMode){var c=("0"+m.time).slice(-7,-1);m.setTime(c)}break;case 13:l.inputMode?k.startTimer():k.editTime();break;case 27:l.inputMode||k.editTime();break;case 32:l.inputMode?o.toggle():k.togglePause();break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:if(l.inputMode){var d=String.fromCharCode(b);m.addDigit(d);break}}32!==b&&o.toggle(!1)}),q.on("touchstart",function(){localStorage.setItem("touch-device","true")}),i.on("load resize orientationChange",function(){a=i.width(),b=i.height();var c=Math.min(1.5*a,b);$.Velocity.hook($("html"),"fontSize",c/9+"px")}),q.click(function(a){$(a.target).hasClass("button")||o.toggle(!1);var b=localStorage.getItem("touch-device"),c=localStorage.getItem("mouse-suggested"),d=sessionStorage.getItem("mouse-suggested"),e="temp"===c,f=e&&!d;b||c&&!f||(localStorage.setItem("mouse-suggested","true"),sessionStorage.setItem("mouse-suggested","true"),n.show("Seems like you have a keyboard. Want to learn a few shortcuts?",[{text:"Never",style:"alert",clickFunction:function(){}},{text:"Not right now",style:"normal",clickFunction:function(){localStorage.setItem("mouse-suggested","temp")}},{text:"Yes, show me",style:"emphasize",clickFunction:function(){o.toggle(!0)}}]))}),j.subscribe("startup",function(){var a=window.location.search,b=new RegExp("&amp;time=([^&amp;]*)","i");a=(a=a.replace(/^\?/,"&amp;").match(b))?a[1]:"",m.validateTime(a)?(c="given",d=a):c="normal"}),j.subscribe("startup.given",function(){m.setTime(("000000"+d).slice(-6)),e()}),{startTimer:e,editTime:f,togglePause:g}}(),l=function(){function a(){d.velocity("stop").velocity({height:"90%",translateY:0},{duration:i,easing:g})}function b(){d.data("inputMode",!0).data("paused",!1).removeClass("running").velocity("stop").velocity({height:"20%"},{duration:i,easing:g})}function c(){d.removeClass("running")}var d=$("#display");return d.data("inputMode",!0),j.subscribe("startup.given",function(){$.Velocity.hook(d,"translateY","-100%")}),j.subscribe("startup.normal",function(){$.Velocity.hook(d,"height","100%"),d.velocity({height:"20%"},{easing:g,duration:i,complete:function(){function a(){return b+c-(new Date).getTime()}var b=parseInt(localStorage.getItem("timeStarted")),c=parseInt(localStorage.getItem("durationSet"));if(b&&c){var d=5;if(a()>1e3*d){var e="Seems like the timer was still running when you last closed this app. Do you want to restore the timer?",f={text:"No",style:"alert",clickFunction:function(){localStorage.setItem("timeStarted","0"),localStorage.setItem("durationSet","0")}},g={text:"Sure",style:"emphasize",clickFunction:function(){var b=1-a()/c;a()>0?($("#dial-ring path").data("timeLeft",a()).data("progress",b),k.startTimer(!1,!0)):n.show("Too late, the timer has already ended")}};n.show(e,[f,g])}}}})}),j.subscribe("start",a),j.subscribe("edit",b),j.subscribe("done",c),{get inputMode(){return d.data("inputMode")},set inputMode(a){a?d.data("inputMode",!0).data("paused",!1).removeClass("running"):d.data("inputMode",!1).addClass("running")},get paused(){return d.data("paused")},set paused(a){d.data("paused",a)},get running(){return d.hasClass("running")},done:c}}(),m=(function(){function a(){c.velocity("stop").velocity({scaleX:0,scaleY:0,opacity:0},{easing:g,duration:i,display:"none"})}function b(){c.velocity("stop").velocity({scaleX:[1,.5],scaleY:1,opacity:1},{easing:g,duration:i,display:"table"})}var c=$("#keypad");$.Velocity.hook(c,"translateX","-50%"),$.Velocity.hook(c,"scaleX",.5),$.Velocity.hook(c,"scaleY",0),$.Velocity.hook(c,"opacity",0),c.on("click","td",function(){var a=$(this).text();"Clear"===a?m.setTime(""):"Start"===a?k.startTimer():m.addDigit(a)}),j.subscribe("startup.normal",function(){c.velocity({opacity:1,scaleX:1,scaleY:1},{easing:g,duration:i})}),j.subscribe("start",a),j.subscribe("edit",b)}(),function(){function c(a){var b=3600*a.slice(-6,-4),c=60*a.slice(-4,-2),d=1*a.slice(-2),e=b+c+d;return e>0&&36e4>e}function d(c,d){var e=!1,h="",j="1rem",k="",l=$("#display-text").clone(!0).attr("id","display-text-old");switch(c){case"000000":case"":c="0s";case"Done":k="000000";case"Paused":h=c,e=!0;break;default:if(f.data("currentTime")!==c||"Paused"===f.text()){for(var m=[],n=["h","m","s"],o=0;3>o;o++){var p=c.slice(2*o,2*o+2);(p>0||m[0]||2===o)&&(10>p&&!m[0]&&(p=p.slice(-1)),m.push(p+n[o]))}var q=m.join(" ");if(.9*b>a&&q.length>8){if(1.5*a>b){var r=1/.9,s=1.5,t=b/a,u=(s-t)/(s-r);j=8/q.length*(1-u)+u}else j=8/q.length;j+="rem"}k=c,h=q,e=!0}}if(e){if($("#display-text-old").remove(),"crossfade"===d){var v=$("#display-text").text(),w=h,x="",y="";if(v.length===w.length)for(var z=0;z<v.length;z++)v[z]===w[z]?(x+=v[z],y+=w[z]):(x+="<span>"+v[z]+"</span>",y+="<span>"+w[z]+"</span>");else x="<span>"+v+"</span>",y="<span>"+w+"</span>";var A=/<\/span><span>/gi;l.html(x.replace(A,"").replace(" ","&nbsp;")).children("span").velocity({opacity:[0,1],scale:0},{easing:g,duration:Math.min(i,1e3),queue:!1,display:"inline-block",complete:function(){$(this).parent().remove()}}).end().prependTo(f.parent()),f.html(y.replace(A,"").replace(" ","&nbsp;")).css({fontFamily:"robotoregular"}).children("span").css("opacity",0).velocity({opacity:1,scale:[1,0]},{easing:g,duration:Math.min(i,1e3),queue:!1,display:"inline-block",complete:function(){$(this).contents().unwrap()}})}else f.css({fontFamily:"robotoregular"}).html(h);f.data("currentTime",k).add(l).velocity({fontSize:j},{easing:g,duration:i,queue:!1})}}function e(a){d((f.data("currentTime")+a).slice(-6))}var f=$("#display-text");return f.data("currentTime","000000"),$.Velocity.hook(f,"translateX","-50%"),$.Velocity.hook(f,"translateY","-50%"),f.click(k.togglePause),j.subscribe("startup.normal",function(){$.Velocity.hook(f,"opacity",0),f.velocity({opacity:1},{easing:g,duration:i})}),j.subscribe("edit",function(){d(f.data("currentTime"),"crossfade")}),j.subscribe("done",function(){d("Done","crossfade")}),{addDigit:e,setTime:d,validateTime:c,get time(){return f.data("currentTime")}}}()),n=function(){function a(a,b){f.text(a);var c=f.siblings("div").empty();if(b){$("#content").css("pointer-events","none");for(var h=b.length-1;h>=0;h--){var j=b[h];$("<div></div>").text(j.text).addClass(j.style+" button").click(j.clickFunction).prependTo(c)}}else clearTimeout(d),d=setTimeout(n.hide,5e3);e.velocity("stop").velocity({translateY:e.data("shown")?0:[0,"-100%"]},{easing:g,display:"block",duration:i,complete:function(){b?$("#content").on("click.bannerhide",n.hide):$(document).on("click.bannerhide",n.hide)}}).data("shown",!0)}function b(){$(document).off("click.bannerhide",n.hide),$("#content").off("click.bannerhide",n.hide).css("pointer-events",""),e.data("shown")&&e.data("shown",!1).velocity("stop").velocity({translateY:"-100%"},{easing:h,display:"none",duration:i/2})}function c(a){e.find("."+a).click()}var d,e=$("#notification-banner"),f=e.find("span");return e.on("click",".button",b),{show:a,hide:b,clickButton:c,get isShown(){return e.data("shown")},get isEmpty(){return""!==e.find("div").text()}}}(),o=function(){function a(c){if(0===arguments.length){var d=!b.data("shown");b.data("shown",d).velocity("stop").velocity({scaleY:d?[1,0]:[0,1],scaleX:d?[1,.5]:[0,1],opacity:d?[1,0]:[0,1]},{easing:d?g:h,display:d?"block":"none",duration:d?i:i/2})}else(b.data("shown")||!1)!==c&&a()}var b=$("#keyboard-help");return $.Velocity.hook(b,"translateX","-50%"),$.Velocity.hook(b,"translateY","-50%"),navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)&&b.find(".delete").text("Delete"),{toggle:a}}(),p=(function(){function a(){c.velocity("stop").velocity({translateY:[0,"100%"],opacity:[1,0]},{easing:g,duration:i,display:"block"})}function b(){c.velocity("stop").velocity({opacity:0,translateY:"-700%"},{easing:g,display:"none",duration:i,complete:function(){$.Velocity.hook($(this),"translateY","0")}})}var c=$("#edit-button");c.click(k.editTime),j.subscribe("start",a),j.subscribe("edit",b)}(),function(){function a(){k.velocity("stop").velocity({opacity:[1,0],scale:[1,0]},{easing:g,duration:i,display:"block"})}function b(){k.velocity("stop").velocity("fadeOut",100)}function c(){k.velocity("stop").velocity({opacity:1},{easing:g,duration:i})}function d(){$("#dial-ring").velocity("stop").velocity({opacity:.25},{easing:g,duration:i})}function f(a,b){var c=b?l.data("timeLeft"):1e3*a,d=b?l.data("progress"):0;l.velocity("stop").velocity({tween:[e,d]},{duration:c,easing:"linear",begin:function(){localStorage.setItem("timeStarted",(new Date).getTime()),localStorage.setItem("durationSet",c)},progress:function(a,b,c,d,e){var f=50,g=40,h=f-g,i=e>=.5?1:0,j=h+g*(1+Math.sin(2*Math.PI*e)),k=h+g*(1-Math.cos(2*Math.PI*e)),n=j+" "+k,o=g+" "+g,p=" 0 "+i+" 1 ",q="M"+f+" "+f,r="m0 "+-g,s="A"+o+p+n;l.attr("d",q+r+s).data("progress",e).data("timeLeft",c);var t=Math.ceil(c/1e3),u=Math.floor(t/60)%60,v=Math.floor(t/3600),w=t%60;w=("0"+w).slice(-2),u=("0"+u).slice(-2),v=("0"+v).slice(-2);var x=[v,u,w];0!==c&&m.setTime(x.join(""),"crossfade")},complete:function(){j.publish("done"),localStorage.setItem("timeStarted",0),localStorage.setItem("durationSet",0)}})}function h(){l.velocity("stop")}var k=$("#dial-ring"),l=$("#dial-ring path");return j.subscribe("start",a),j.subscribe("edit",h),j.subscribe("edit",b),j.subscribe("pause",h),j.subscribe("pause",d),j.subscribe("resume",c),{wind:f}}());j.publish("startup"),j.publish("startup."+c)});
//# sourceMappingURL=timer.min.js.map