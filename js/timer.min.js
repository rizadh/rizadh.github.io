"use strict";function setDial(t,i,e){var a=e>=.5?1:0,o=i*(1+Math.sin(2*Math.PI*e)),n=i*(1-Math.cos(2*Math.PI*e)),s=o+" "+n,l=i+" "+i,r=" 0 "+a+" 1 ",c="M"+i+" "+i,d="L"+i+" 0",p="A"+l+r+s,y=c+d+p;t.attr("d",y)}function setTime(t){var i=1e3*t;$("#dial-ring path").velocity({tween:WHOLE_CIRCLE},{duration:i,easing:"linear",progress:function(t,i,e,a,o){setDial($("#dial-ring path"),50,o);var n=Math.ceil(e/1e3),s=Math.floor(n/60)%60,l=Math.floor(n/3600);n%=60,n=("0"+n).slice(-2),s=("0"+s).slice(-2),l=("0"+l).slice(-2),setDisplayTime([l,s,n].join(""))}})}function getDisplayTime(t){var i=$("#display-text");return t?i.text():i.data("current_time")}function setDisplayTime(t,i){var e=$("#display-text");if(i)e.text(t);else if(""==t)e.data("current_time","000000").text("Enter a time").css("font-family","roboto_condensedregular");else{e.data("current_time",t).css("font-family","robotoregular");for(var a=getDisplayTime(),o=[],n=["h","m","s"],s=0;3>s;s++){var l=a.slice(2*s,2*s+2);(l>0||o[s-1]||"s"==n[s])&&(10>l&&!o[0]&&(l=l.slice(-1)),o.push(l+n[s]))}var r=o.join(" ");r!=e.text()&&e.text(r)}}function startTimer(){$("#input-display").velocity("stop").velocity({height:"90%"},{duration:400,easing:"easeOutExpo"}),$("#input-keypad td").velocity("stop").velocity("fadeOut",200),$("#edit-button").velocity("stop").velocity("fadeIn",100),$("#dial-ring").velocity("stop").velocity("fadeIn",200);var t=getDisplayTime(),i=3600*t.slice(-6,-4),e=60*t.slice(-4,-2),a=1*t.slice(-2),o=i+e+a;setTime(o)}function editTime(){$("#dial-ring path").velocity("stop"),$("#input-display").velocity("stop").velocity({height:"20%"},{duration:400,easing:"easeOutExpo"}),$("#input-keypad td").velocity("stop").velocity("fadeIn",{duration:200,display:""}),$("#edit-button").velocity("stop").velocity("fadeOut",100),$("#dial-ring").velocity("stop").velocity("fadeOut",200)}var WHOLE_CIRCLE=.99999999;$(function(){setDisplayTime(""),$("#input-keypad td").on("tap",function(){var t=$(this).text();if("Clear"==t)setDisplayTime("");else if("Start"==t)startTimer();else{var i=(getDisplayTime()+t).slice(-6);setDisplayTime(i)}}),$("#edit-button").on("tap",function(){editTime()})}),$(window).on("load resize orientationChange",function(){var t=Math.min(window.innerHeight,window.innerWidth);$("body").css("font-size",t/8)});