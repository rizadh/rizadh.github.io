function setDial(e,i,t){var a=t>=.5?1:0,n=i*(1+Math.sin(2*Math.PI*t)),l=i*(1-Math.cos(2*Math.PI*t)),s=n+" "+l,o=i+" "+i,r=" 0 "+a+" 1 ",c="M"+i+" "+i,d="L"+i+" 0",u="A"+o+r+s,y=c+d+u;e.attr("d",y)}function setTime(e){dial_time=1e3*e,$("#dial-ring path").velocity({tween:WHOLE_CIRCLE},{duration:dial_time,easing:"linear",progress:function(e,i,t,a,n){setDial($("#dial-ring path"),50,n);var l=Math.ceil(t/1e3),s=Math.floor(l/60)%60,o=Math.floor(l/3600);l%=60,l=("0"+l).slice(-2),s=("0"+s).slice(-2),o=("0"+o).slice(-2),setDisplayTime([o,s,l].join(""))}})}function getDisplayTime(e){var i=$("#display-text");return e?i.text():i.data("current_time")}function setDisplayTime(e,i){var t=$("#display-text");if(i)t.text(e);else if(""==e)t.data("current_time","000000").text("Enter a time").css("font-family","roboto_condensedregular");else{t.data("current_time",e).css("font-family","robotoregular");for(var a=getDisplayTime(),n=[],l=["h","m","s"],s=0;3>s;s++){var o=a.slice(2*s,2*s+2);(o>0||n[s-1]||"s"==l[s])&&(10>o&&!n[0]&&(o=o.slice(-1)),n.push(o+l[s]))}var r=n.join(" ");r!=t.text()&&t.text(r)}}function startTimer(){$("#input-display").velocity({height:"90%"},{duration:400,easing:"easeOutExpo"}),$("#input-keypad td").velocity("fadeOut",200),$("#edit-button").velocity("fadeIn",100),$("#dial-ring").velocity({opacity:[1,0],scale:[1,.5]},{easing:"easeOutExpo",display:"block",duration:400});var e=getDisplayTime(),i=3600*e.slice(-6,-4),t=60*e.slice(-4,-2),a=1*e.slice(-2),n=i+t+a;setTime(n)}function editTime(){$("#dial-ring path").velocity("stop"),$("#input-display").velocity({height:"20%"},{duration:400,easing:"easeOutExpo"}),$("#input-keypad td").velocity("fadeIn",{duration:200,display:""}),$("#edit-button").velocity("fadeOut",100),$("#dial-ring").velocity("fadeOut",100)}var WHOLE_CIRCLE=.99999;$(function(){setDisplayTime(""),$("#input-keypad td").click(function(){if(key_value=$(this).text(),"Clear"==key_value)setDisplayTime("");else if("Start"==key_value)startTimer();else{var e=(getDisplayTime()+key_value).slice(-6);setDisplayTime(e)}}),$("#edit-button").click(function(){editTime()})}),$(window).on("load resize orientationChange",function(){var e=Math.min(window.innerHeight,window.innerWidth);$("body").css("font-size",e/8)});